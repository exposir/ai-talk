# å‰ç«¯çŠ¶æ€ç®¡ç†åº“æ·±åº¦åˆ†æä¸ä¸‹ä¸€ä»£æ–¹æ¡ˆæ„æƒ³

> å›é¡¾äººç±»æ‰€æœ‰ä»£ç åº“ï¼Œå‰ç«¯é¢†åŸŸçš„çŠ¶æ€ç®¡ç†ä»æ¥æ²¡æœ‰"å®Œç¾"çš„æ–¹æ¡ˆã€‚è¿™ä»½æ–‡æ¡£åˆ†æäº†ç°æœ‰æ–¹æ¡ˆçš„æ ¸å¿ƒé—®é¢˜ï¼Œå¹¶æ¢è®¨ä¸‹ä¸€ä»£çŠ¶æ€ç®¡ç†åº“çš„è®¾è®¡æ€è·¯ã€‚

---

## ğŸ“Š çŠ¶æ€ç®¡ç†åº“å…¨æ™¯å›¾

| æ´¾ç³»                | åº“                                                                                  | ä½œè€…/ç»„ç»‡                      | Stars   | æ ¸å¿ƒæ€æƒ³                    |
| :------------------ | :---------------------------------------------------------------------------------- | :----------------------------- | :------ | :-------------------------- |
| **Flux æ¶æ„æ´¾**     | [Redux](https://github.com/reduxjs/redux)                                           | Dan Abramov / Redux Team       | â­ 60k  | å•ä¸€æ•°æ®æº + çº¯å‡½æ•° Reducer |
|                     | [Redux Toolkit](https://github.com/reduxjs/redux-toolkit)                           | Redux Team                     | â­ 10k  | Redux å®˜æ–¹ç®€åŒ–ç‰ˆ            |
|                     | [Zustand](https://github.com/pmndrs/zustand)                                        | Pmndrs (Dai Shi)               | â­ 40k  | æç®€ Fluxï¼Œæ—  Provider      |
| **åŸå­åŒ–æ´¾**        | [Jotai](https://github.com/pmndrs/jotai)                                            | Pmndrs (Dai Shi)               | â­ 17k  | è‡ªåº•å‘ä¸Šçš„åŸå­ç»„åˆ          |
|                     | [Recoil](https://github.com/facebookexperimental/Recoil) âš ï¸                         | Meta (Facebook)                | â­ 19k  | å·²åœæ­¢ç»´æŠ¤                  |
|                     | [Nano Stores](https://github.com/nanostores/nanostores)                             | Evil Martians                  | â­ 5k   | æ¡†æ¶æ— å…³ï¼Œ< 1KB             |
| **Proxy å“åº”å¼æ´¾**  | [MobX](https://github.com/mobxjs/mobx)                                              | Michel Weststrate              | â­ 27k  | é€æ˜å‡½æ•°å¼å“åº”ç¼–ç¨‹          |
|                     | [MobX-State-Tree](https://github.com/mobxjs/mobx-state-tree)                        | Michel Weststrate              | â­ 6.9k | ç»“æ„åŒ–ç±»å‹ + å¿«ç…§           |
|                     | [Valtio](https://github.com/pmndrs/valtio)                                          | Pmndrs (Dai Shi)               | â­ 8.5k | åƒ Vue ä¸€æ ·å¯å˜             |
| **Signal ç»†ç²’åº¦æ´¾** | [Preact Signals](https://github.com/preactjs/signals)                               | Preact Team                    | â­ 3.5k | ç»•è¿‡ VDOM Diff              |
|                     | [Legend-State](https://github.com/LegendApp/legend-state)                           | Legend App                     | â­ 2.5k | å£°ç§°æ¯” Zustand å¿« 10x       |
|                     | [Solid.js](https://github.com/solidjs/solid)                                        | Ryan Carniato                  | â­ 30k  | ç¼–è¯‘æ—¶ + æ—  VDOM            |
| **çŠ¶æ€æœºæ´¾ (FSM)**  | [XState](https://github.com/statelyai/xstate)                                       | Stately (David Khourshid)      | â­ 26k  | W3C SCXML æ ‡å‡†å®ç° [^1]     |
|                     | [Robot](https://github.com/matthewp/robot)                                          | Matthew Phillips               | â­ 1.8k | æç®€ FSMï¼Œ< 1KB             |
| **æœåŠ¡ç«¯çŠ¶æ€æ´¾**    | [TanStack Query](https://github.com/TanStack/query)                                 | Tanner Linsley                 | â­ 40k  | æœåŠ¡ç«¯çŠ¶æ€ = ç¼“å­˜           |
|                     | [SWR](https://github.com/vercel/swr)                                                | Vercel                         | â­ 30k  | Stale-While-Revalidate      |
|                     | [RTK Query](https://github.com/reduxjs/redux-toolkit)                               | Redux Team                     | -       | Redux ç”Ÿæ€æ–¹æ¡ˆ              |
| **RxJS æµå¼æ´¾**     | [RxJS](https://github.com/ReactiveX/rxjs)                                           | ReactiveX / Ben Lesh           | â­ 30k  | ä¸€åˆ‡çš†æµ                    |
|                     | [Elf](https://github.com/ngneat/elf)                                                | ngneat                         | â­ 1.5k | åŸºäº RxJS çš„ Store          |
|                     | [Akita](https://github.com/datorama/akita)                                          | Datorama                       | â­ 3.7k | å®ä½“ç®¡ç†                    |
| **CRDT åä½œæ´¾**     | [Yjs](https://github.com/yjs/yjs)                                                   | Kevin Jahns                    | â­ 15k  | æ— å†²çªå¤åˆ¶æ•°æ®ç±»å‹          |
|                     | [Automerge](https://github.com/automerge/automerge)                                 | Ink & Switch                   | â­ 3k   | JSON å‹å¥½ CRDT              |
|                     | [Liveblocks](https://liveblocks.io/)                                                | Liveblocks Inc.                | -       | CRDT + BaaS                 |
| **GraphQL æ´¾**      | [Apollo Client](https://github.com/apollographql/apollo-client)                     | Apollo GraphQL                 | â­ 19k  | å½’ä¸€åŒ–ç¼“å­˜                  |
|                     | [Relay](https://github.com/facebook/relay)                                          | Meta (Facebook)                | â­ 18k  | ç¼–è¯‘æœŸä¼˜åŒ–                  |
|                     | [URQL](https://github.com/urql-graphql/urql)                                        | urql-graphql                   | â­ 8.5k | è½»é‡çº§ GraphQL              |
| **å…¶ä»–ç‰¹è‰²**        | [Effector](https://github.com/effector/effector)                                    | Dmitry Boldyrev                | â­ 4.5k | å¤šå‘æ•°æ®æµ                  |
|                     | [Hookstate](https://github.com/avkonst/hookstate)                                   | Andrey Konstantinov            | â­ 1.6k | Proxy + Hook æç®€           |
|                     | [Overmind](https://github.com/cerebral/overmind)                                    | Cerebral                       | â­ 1.3k | Flux + FSM + Proxy èåˆ     |
| **é¢†åŸŸä¸“ç”¨**        | [React Hook Form](https://github.com/react-hook-form/react-hook-form)               | Bill Luo                       | â­ 40k  | è¡¨å•çŠ¶æ€                    |
|                     | [TanStack Router](https://github.com/TanStack/router)                               | Tanner Linsley                 | â­ 7k   | URL å³çŠ¶æ€                  |
|                     | [TanStack Table](https://github.com/TanStack/table)                                 | Tanner Linsley                 | â­ 24k  | è¡¨æ ¼çŠ¶æ€                    |
|                     | [RxDB](https://github.com/pubkey/rxdb) / [Dexie](https://github.com/dexie/Dexie.js) | Daniel Meyer / David Fahlander | -       | æœ¬åœ°æ•°æ®åº“                  |

### å¿«é€Ÿé€‰æ‹©æŒ‡å—

| åœºæ™¯               | æ¨èæ–¹æ¡ˆ              | ç†ç”±                   |
| :----------------- | :-------------------- | :--------------------- |
| **ç®€å•é¡¹ç›®**       | Zustand               | æç®€ APIï¼Œ< 1KB        |
| **å¤§å‹ä¼ä¸šåº”ç”¨**   | Zustand + React Query | å®¢æˆ·ç«¯/æœåŠ¡ç«¯åˆ†ç¦»      |
| **å¤æ‚äº¤äº’é€»è¾‘**   | XState                | çŠ¶æ€æœºå¯è§†åŒ–ã€æ•°å­¦è¯æ˜ |
| **æè‡´æ€§èƒ½**       | Legend-State / Jotai  | Signal ç»†ç²’åº¦æ›´æ–°      |
| **å¤šäººåä½œ**       | Yjs + Liveblocks      | CRDT å†²çªè‡ªåŠ¨è§£å†³      |
| **GraphQL é¡¹ç›®**   | Apollo / URQL         | å½’ä¸€åŒ–ç¼“å­˜             |
| **Redux é—ç•™é¡¹ç›®** | Redux Toolkit         | å®˜æ–¹ç°ä»£åŒ–æ–¹æ¡ˆ         |

[^1]:
    **ä»€ä¹ˆæ˜¯çŠ¶æ€æœºï¼Ÿ**
    çŠ¶æ€æœº (FSM) æ˜¯æŒ‡"ç³»ç»Ÿåªèƒ½å¤„äºæœ‰é™ä¸ªçŠ¶æ€ä¹‹ä¸€ï¼Œé€šè¿‡äº‹ä»¶è§¦å‘çŠ¶æ€è½¬æ¢"çš„æ¨¡å‹ã€‚ä¾‹å¦‚äº¤é€šç¯åªèƒ½æ˜¯çº¢/é»„/ç»¿ä¸‰ä¸ªçŠ¶æ€ï¼ŒæŒ‰å›ºå®šè§„åˆ™åˆ‡æ¢ã€‚**ä¸ºä»€ä¹ˆå‰ç«¯å°‘è§ï¼Ÿ**
    å‰ç«¯ä» jQuery è„šæœ¬å‘å±•è€Œæ¥ï¼Œä¹ æƒ¯ç”¨ `isLoading/isError`
    ç­‰å¸ƒå°”å€¼ç»„åˆè¡¨ç¤ºçŠ¶æ€ï¼Œä½†è¿™ä¼šäº§ç”Ÿ"ä¸å¯èƒ½çŠ¶æ€"çš„ Bugï¼ˆå¦‚
    `isLoading=true && isError=true`
    åŒæ—¶ä¸ºçœŸï¼‰ã€‚çŠ¶æ€æœºå¼ºåˆ¶ä½ æ˜¾å¼å®šä¹‰æ‰€æœ‰åˆæ³•çŠ¶æ€å’Œè½¬æ¢è§„åˆ™ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆé™¤è¿™ç±»é—®é¢˜ã€‚**SCXML**
    æ˜¯ W3C åˆ¶å®šçš„çŠ¶æ€æœºæè¿°æ ‡å‡†ï¼Œæºäº 1987 å¹´ David
    Harel çš„ Statecharts è®ºæ–‡ï¼ŒXState ä¸¥æ ¼éµå¾ªæ­¤è§„èŒƒå®ç°ã€‚

---

## ä¸€ã€å‰ç«¯çŠ¶æ€ç®¡ç†åº“å¤§å…¨ï¼šå®ç°åŸç†ä¸æ ¸å¿ƒæ€æƒ³

> æœ¬ç« èŠ‚æ”¶å½•äº†å‰ç«¯ç”Ÿæ€ä¸­**æ‰€æœ‰ä¸»æµåŠå°ä¼—**çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼ŒæŒ‰æŠ€æœ¯èŒƒå¼åˆ†ç±»ï¼Œæ·±å…¥è§£ææ¯ä¸ªåº“çš„åº•å±‚å®ç°å’Œè®¾è®¡å“²å­¦ã€‚

---

### 1.1 Flux æ¶æ„æ´¾ç³»

#### Redux (Facebook, 2015)

| ç»´åº¦         | å†…å®¹                                                                                                       |
| :----------- | :--------------------------------------------------------------------------------------------------------- |
| **GitHub**   | [reduxjs/redux](https://github.com/reduxjs/redux) â­ 60k+                                                  |
| **æ ¸å¿ƒæ€æƒ³** | å•ä¸€æ•°æ®æº + çº¯å‡½æ•° Reducer + ä¸å¯å˜æ›´æ–°                                                                   |
| **å®ç°åŸç†** | åŸºäºå‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€‚Store æŒæœ‰å…¨å±€çŠ¶æ€æ ‘ï¼Œé€šè¿‡ `dispatch(action)` è§¦å‘ Reducer è®¡ç®—æ–°çŠ¶æ€ï¼Œå†é€šçŸ¥æ‰€æœ‰è®¢é˜…è€… |
| **æ•°æ®æµ**   | `View â†’ dispatch(Action) â†’ Reducer(state, action) â†’ newState â†’ View`                                       |
| **ä¼˜ç‚¹**     | å¯é¢„æµ‹æ€§å¼ºã€æ—¶é—´æ—…è¡Œè°ƒè¯•ã€ä¸­é—´ä»¶ç”Ÿæ€ä¸°å¯Œ                                                                   |
| **ç¼ºç‚¹**     | æ ·æ¿ä»£ç å¤šã€å­¦ä¹ æ›²çº¿é™¡ã€å°é¡¹ç›®è¿‡åº¦è®¾è®¡                                                                     |

```javascript
// Redux æ ¸å¿ƒåŸç†ç®€åŒ–å®ç°
function createStore(reducer) {
  let state;
  let listeners = [];

  const getState = () => state;
  const dispatch = (action) => {
    state = reducer(state, action); // çº¯å‡½æ•°è®¡ç®—æ–°çŠ¶æ€
    listeners.forEach((l) => l()); // é€šçŸ¥è®¢é˜…è€…
  };
  const subscribe = (listener) => {
    listeners.push(listener);
    return () => {
      listeners = listeners.filter((l) => l !== listener);
    };
  };

  dispatch({ type: '@@INIT' });
  return { getState, dispatch, subscribe };
}
```

---

#### Redux Toolkit (RTK)

| ç»´åº¦         | å†…å®¹                                                                                     |
| :----------- | :--------------------------------------------------------------------------------------- |
| **GitHub**   | [reduxjs/redux-toolkit](https://github.com/reduxjs/redux-toolkit) â­ 10k+                |
| **æ ¸å¿ƒæ€æƒ³** | Redux å®˜æ–¹"ç”µæ± å…¨åŒ…"ç‰ˆï¼Œå†…ç½® Immer + Thunk + DevTools                                    |
| **å®ç°åŸç†** | åœ¨ Redux åŸºç¡€ä¸Šï¼Œ`createSlice` è‡ªåŠ¨ç”Ÿæˆ action creators å’Œ reducerï¼ŒImmer å…è®¸"å¯å˜"å†™æ³• |
| **ä¼˜ç‚¹**     | å¤§å¹…å‡å°‘æ ·æ¿ä»£ç ã€TypeScript å‹å¥½                                                        |
| **ç¼ºç‚¹**     | ä»ç»§æ‰¿ Redux çš„å¤æ‚å¿ƒæ™ºæ¨¡å‹                                                              |

```javascript
// RTK çš„ createSlice åº•å±‚ç”¨ Immer åŒ…è£…
const slice = createSlice({
  name: 'counter',
  initialState: { value: 0 },
  reducers: {
    // çœ‹èµ·æ¥æ˜¯å¯å˜æ“ä½œï¼Œå®é™… Immer è½¬ä¸ºä¸å¯å˜
    increment: (state) => {
      state.value += 1;
    },
  },
});
```

---

#### Zustand (Pmndrs, 2019)

| ç»´åº¦         | å†…å®¹                                                                                  |
| :----------- | :------------------------------------------------------------------------------------ |
| **GitHub**   | [pmndrs/zustand](https://github.com/pmndrs/zustand) â­ 40k+                           |
| **æ ¸å¿ƒæ€æƒ³** | æç®€ Fluxï¼Œå»æ‰ Redux çš„æ‰€æœ‰ä»ªå¼æ„Ÿ                                                    |
| **å®ç°åŸç†** | åŸºäºé—­åŒ…çš„å‘å¸ƒ-è®¢é˜…ã€‚ç”¨ `useSyncExternalStore` ä¸ React åŒæ­¥ï¼ŒSelector å®ç°ç»†ç²’åº¦è®¢é˜… |
| **ä¼˜ç‚¹**     | API æç®€ (< 1KB)ã€æ—  Providerã€æ”¯æŒä¸­é—´ä»¶                                             |
| **ç¼ºç‚¹**     | æ²¡æœ‰å†…ç½®çš„ action ç±»å‹çº¦æŸ                                                            |

```javascript
// Zustand æ ¸å¿ƒå®ç° (ç®€åŒ–)
const createStore = (createState) => {
  let state;
  const listeners = new Set();

  const setState = (partial) => {
    const nextState = typeof partial === 'function' ? partial(state) : partial;
    if (!Object.is(nextState, state)) {
      state = Object.assign({}, state, nextState);
      listeners.forEach((l) => l(state));
    }
  };

  const getState = () => state;
  const subscribe = (listener) => {
    listeners.add(listener);
    return () => listeners.delete(listener);
  };

  state = createState(setState, getState);
  return { setState, getState, subscribe };
};
```

---

### 1.2 åŸå­åŒ–çŠ¶æ€æ´¾ç³» (Atomic State)

#### Jotai (Pmndrs, 2020)

| ç»´åº¦         | å†…å®¹                                                                                               |
| :----------- | :------------------------------------------------------------------------------------------------- |
| **GitHub**   | [pmndrs/jotai](https://github.com/pmndrs/jotai) â­ 17k+                                            |
| **æ ¸å¿ƒæ€æƒ³** | åŸå­åŒ– + è‡ªåº•å‘ä¸Šã€‚çŠ¶æ€æ˜¯ç‹¬ç«‹çš„"åŸå­"ï¼Œå¯ç»„åˆæ´¾ç”Ÿ                                                  |
| **å®ç°åŸç†** | æ¯ä¸ª atom æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼ŒStore ç»´æŠ¤ atom â†’ value çš„ WeakMapã€‚è¯»å–æ—¶å»ºç«‹ä¾èµ–å›¾ï¼Œå†™å…¥æ—¶è§¦å‘ä¾èµ–æ›´æ–° |
| **ä¼˜ç‚¹**     | ç»†ç²’åº¦æ›´æ–°ã€æ—  Provider å¯é€‰ã€React Suspense åŸç”Ÿæ”¯æŒ                                              |
| **ç¼ºç‚¹**     | è°ƒè¯•æ—¶éš¾ä»¥æŸ¥çœ‹å®Œæ•´çŠ¶æ€æ ‘                                                                           |

```javascript
// Jotai atom æœ¬è´¨æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡
const countAtom = atom(0); // { init: 0, read: ..., write: ... }

// æ´¾ç”Ÿ atom
const doubleAtom = atom((get) => get(countAtom) * 2);

// Store å†…éƒ¨ç»“æ„
// Map<Atom, { value, dependents: Set<Atom>, listeners: Set<Function> }>
```

---

#### Recoil (Facebook, 2020) âš ï¸ å·²åœæ­¢ç»´æŠ¤

| ç»´åº¦         | å†…å®¹                                                                                  |
| :----------- | :------------------------------------------------------------------------------------ |
| **GitHub**   | [facebookexperimental/Recoil](https://github.com/facebookexperimental/Recoil) â­ 19k+ |
| **æ ¸å¿ƒæ€æƒ³** | åŸå­åŒ– + å›¾ä¾èµ–ã€‚ä¸ Jotai ç±»ä¼¼ä½†æ›´é‡                                                  |
| **å®ç°åŸç†** | åŸºäºæœ‰å‘å›¾çš„ä¾èµ–è¿½è¸ªï¼ŒSelector èŠ‚ç‚¹ç¼“å­˜è®¡ç®—ç»“æœ                                       |
| **çŠ¶æ€**     | **âš ï¸ 2024 å¹´å·²å®£å¸ƒåœæ­¢ç»´æŠ¤ï¼Œå»ºè®®è¿ç§»è‡³ Jotai**                                        |

---

#### Nano Stores (Evil Martians)

| ç»´åº¦         | å†…å®¹                                                                     |
| :----------- | :----------------------------------------------------------------------- |
| **GitHub**   | [nanostores/nanostores](https://github.com/nanostores/nanostores) â­ 5k+ |
| **æ ¸å¿ƒæ€æƒ³** | æ¡†æ¶æ— å…³çš„æç®€åŸå­åŒ–                                                     |
| **å®ç°åŸç†** | çº¯ JS å®ç°çš„å‘å¸ƒ-è®¢é˜…ï¼Œæ¯ä¸ª store æ˜¯ç‹¬ç«‹çš„å¯è®¢é˜…å¯¹è±¡                     |
| **ä¼˜ç‚¹**     | < 1KBã€æ— ä¾èµ–ã€React/Vue/Svelte é€šç”¨                                     |
| **ç¼ºç‚¹**     | åŠŸèƒ½æç®€ï¼Œå¤æ‚åœºæ™¯éœ€ç»„åˆå¤šä¸ªåº“                                           |

```javascript
// Nano Stores æç®€å®ç°
import { atom, computed } from 'nanostores';

const count = atom(0);
const double = computed(count, (n) => n * 2);

count.subscribe((value) => console.log(value));
count.set(count.get() + 1);
```

---

### 1.3 Proxy å“åº”å¼æ´¾ç³»

#### MobX (2015)

| ç»´åº¦         | å†…å®¹                                                                                          |
| :----------- | :-------------------------------------------------------------------------------------------- |
| **GitHub**   | [mobxjs/mobx](https://github.com/mobxjs/mobx) â­ 27k+                                         |
| **æ ¸å¿ƒæ€æƒ³** | é€æ˜å‡½æ•°å¼å“åº”ç¼–ç¨‹ (TFRP)ã€‚ç”¨ OOP å†™æ³•ï¼Œè‡ªåŠ¨è¿½è¸ªä¾èµ–                                          |
| **å®ç°åŸç†** | ä½¿ç”¨ `Proxy`ï¼ˆæˆ– ES5 çš„ `Object.defineProperty`ï¼‰æ‹¦æˆªå±æ€§è®¿é—®ã€‚è¯»å–æ—¶æ”¶é›†ä¾èµ–ï¼Œå†™å…¥æ—¶è§¦å‘æ›´æ–° |
| **ä¼˜ç‚¹**     | å†™æ³•è‡ªç„¶ï¼ˆç›´æ¥èµ‹å€¼ï¼‰ã€è‡ªåŠ¨ç»†ç²’åº¦æ›´æ–°                                                          |
| **ç¼ºç‚¹**     | éšå¼é­”æ³•å¤šã€è°ƒè¯•å›°éš¾ã€è£…é¥°å™¨è¯­æ³•äº‰è®®                                                          |

```javascript
// MobX å“åº”å¼åŸç†
const handler = {
  get(target, prop, receiver) {
    trackDependency(target, prop); // æ”¶é›†ä¾èµ–
    return Reflect.get(target, prop, receiver);
  },
  set(target, prop, value, receiver) {
    Reflect.set(target, prop, value, receiver);
    triggerReactions(target, prop); // è§¦å‘æ›´æ–°
    return true;
  },
};
const observable = new Proxy(rawObject, handler);
```

---

#### MobX-State-Tree (MST)

| ç»´åº¦         | å†…å®¹                                                                         |
| :----------- | :--------------------------------------------------------------------------- |
| **GitHub**   | [mobxjs/mobx-state-tree](https://github.com/mobxjs/mobx-state-tree) â­ 6.9k+ |
| **æ ¸å¿ƒæ€æƒ³** | MobX + ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿ + å¿«ç…§ + æ—¶é—´æ—…è¡Œ                                      |
| **å®ç°åŸç†** | åœ¨ MobX åŸºç¡€ä¸Šå¢åŠ  Schema æ ¡éªŒã€è‡ªåŠ¨åºåˆ—åŒ–ã€è¡¥ä¸å†å²                         |
| **ä¼˜ç‚¹**     | å¤æ‚åµŒå¥—æ•°æ®çš„ç»ˆææ–¹æ¡ˆã€ç±»å‹è¿è¡Œæ—¶æ ¡éªŒ                                       |
| **ç¼ºç‚¹**     | å­¦ä¹ æ›²çº¿æé«˜ã€æ‰“åŒ…ä½“ç§¯å¤§                                                     |

---

#### Valtio (Pmndrs, 2021)

| ç»´åº¦         | å†…å®¹                                                              |
| :----------- | :---------------------------------------------------------------- |
| **GitHub**   | [pmndrs/valtio](https://github.com/pmndrs/valtio) â­ 8.5k+        |
| **æ ¸å¿ƒæ€æƒ³** | ç”¨ Proxy è®© React çŠ¶æ€åƒ Vue ä¸€æ ·å¯å˜                             |
| **å®ç°åŸç†** | `proxy()` è¿”å› Proxy å¯¹è±¡ï¼Œ`useSnapshot()` åœ¨æ¸²æŸ“æ—¶åˆ›å»ºä¸å¯å˜å¿«ç…§ |
| **ä¼˜ç‚¹**     | å†™æ³•æç®€ã€æ—  action æ¦‚å¿µ                                          |
| **ç¼ºç‚¹**     | Proxy çš„éšå¼è¡Œä¸ºå¯èƒ½å¯¼è‡´å›°æƒ‘                                      |

```javascript
import { proxy, useSnapshot } from 'valtio';

const state = proxy({ count: 0 });

// ç›´æ¥ä¿®æ”¹
state.count++;

// ç»„ä»¶ä¸­ä½¿ç”¨
function Counter() {
  const snap = useSnapshot(state); // è‡ªåŠ¨è¿½è¸ª
  return <div>{snap.count}</div>;
}
```

---

### 1.4 Signal ç»†ç²’åº¦å“åº”å¼æ´¾ç³»

#### Preact Signals

| ç»´åº¦         | å†…å®¹                                                             |
| :----------- | :--------------------------------------------------------------- |
| **GitHub**   | [preactjs/signals](https://github.com/preactjs/signals) â­ 3.5k+ |
| **æ ¸å¿ƒæ€æƒ³** | ç»•è¿‡ VDOM Diffï¼Œç›´æ¥æ›´æ–° DOM èŠ‚ç‚¹                                |
| **å®ç°åŸç†** | Signal æ˜¯ä¸€ä¸ªå¸¦å€¼çš„ç›’å­ï¼Œè¯»å–æ—¶è‡ªåŠ¨è®¢é˜…ï¼Œå†™å…¥æ—¶ç›´æ¥æ›´æ–°è®¢é˜…è€…    |
| **ä¼˜ç‚¹**     | æè‡´æ€§èƒ½ã€æ¯” `useMemo` æ›´ç»†ç²’åº¦                                  |
| **ç¼ºç‚¹**     | ç ´å React å•å‘æ•°æ®æµå“²å­¦                                        |

```javascript
// Signal æ ¸å¿ƒæ¦‚å¿µ
const count = signal(0);
const double = computed(() => count.value * 2);

// è¯»å–è‡ªåŠ¨å»ºç«‹ä¾èµ–
effect(() => console.log(count.value));

// å†™å…¥è§¦å‘æ›´æ–°
count.value++; // effect è‡ªåŠ¨æ‰§è¡Œ
```

---

#### Legend-State

| ç»´åº¦         | å†…å®¹                                                                         |
| :----------- | :--------------------------------------------------------------------------- |
| **GitHub**   | [LegendApp/legend-state](https://github.com/LegendApp/legend-state) â­ 2.5k+ |
| **æ ¸å¿ƒæ€æƒ³** | æœ€å¿«çš„ React çŠ¶æ€åº“ï¼Œå£°ç§°æ¯” Zustand å¿« 10x                                   |
| **å®ç°åŸç†** | Proxy æ‹¦æˆª + ç»†ç²’åº¦ Signal + è‡ªåŠ¨æŒä¹…åŒ–                                      |
| **ä¼˜ç‚¹**     | æè‡´æ€§èƒ½ã€å†…ç½® LocalStorage/AsyncStorage åŒæ­¥                                |
| **ç¼ºç‚¹**     | ç›¸å¯¹å°ä¼—ï¼Œç”Ÿæ€æœ‰é™                                                           |

---

#### Solid.js Signals (ä½œä¸ºå‚è€ƒ)

| ç»´åº¦         | å†…å®¹                                                         |
| :----------- | :----------------------------------------------------------- |
| **GitHub**   | [solidjs/solid](https://github.com/solidjs/solid) â­ 30k+    |
| **æ ¸å¿ƒæ€æƒ³** | ç¼–è¯‘æ—¶ + ç»†ç²’åº¦å“åº”å¼ï¼Œæ—  VDOM                               |
| **å®ç°åŸç†** | ç¼–è¯‘å™¨å°† JSX è½¬æ¢ä¸ºçœŸå® DOM æ“ä½œï¼ŒSignal ç›´æ¥ç»‘å®šåˆ° DOM èŠ‚ç‚¹ |
| **æ„ä¹‰**     | React ç¤¾åŒºçš„ Signal æ–¹æ¡ˆéƒ½åœ¨æ¨¡ä»¿ Solid çš„è®¾è®¡                |

---

### 1.5 æœ‰é™çŠ¶æ€æœºæ´¾ç³» (FSM / Statecharts)

#### XState (Stately, 2017)

| ç»´åº¦         | å†…å®¹                                                            |
| :----------- | :-------------------------------------------------------------- |
| **GitHub**   | [statelyai/xstate](https://github.com/statelyai/xstate) â­ 26k+ |
| **æ ¸å¿ƒæ€æƒ³** | W3C SCXML æ ‡å‡†å®ç°ï¼ŒçŠ¶æ€å›¾ (Statecharts) å¯è§†åŒ–                 |
| **å®ç°åŸç†** | ç”¨é…ç½®å¯¹è±¡æè¿°çŠ¶æ€æœºï¼ŒInterpreter è§£æäº‹ä»¶å¹¶æ‰§è¡Œè½¬æ¢            |
| **é€‚ç”¨åœºæ™¯** | å¤æ‚äº¤äº’æµç¨‹ã€æ”¯ä»˜ã€è¿æ¥ç®¡ç†ã€æ¸¸æˆé€»è¾‘                          |
| **ä¼˜ç‚¹**     | æ•°å­¦å¯è¯æ˜ã€å¯è§†åŒ–å³ä»£ç ã€Actor æ¨¡å‹                            |
| **ç¼ºç‚¹**     | å­¦ä¹ æ›²çº¿é«˜ã€ç®€å•åœºæ™¯è¿‡åº¦è®¾è®¡                                    |

```javascript
// XState çŠ¶æ€æœºå®šä¹‰
const machine = createMachine({
  id: 'auth',
  initial: 'idle',
  context: { retries: 0 },
  states: {
    idle: {
      on: { LOGIN: 'loading' },
    },
    loading: {
      invoke: {
        src: 'loginService',
        onDone: 'success',
        onError: 'failure',
      },
    },
    success: { type: 'final' },
    failure: {
      on: {
        RETRY: {
          target: 'loading',
          actions: assign({ retries: (ctx) => ctx.retries + 1 }),
        },
      },
    },
  },
});
```

---

#### Robot (å°å‹ FSM)

| ç»´åº¦         | å†…å®¹                                                         |
| :----------- | :----------------------------------------------------------- |
| **GitHub**   | [matthewp/robot](https://github.com/matthewp/robot) â­ 1.8k+ |
| **æ ¸å¿ƒæ€æƒ³** | æç®€æœ‰é™çŠ¶æ€æœº                                               |
| **ä¼˜ç‚¹**     | < 1KBã€å‡½æ•°å¼ APIã€æ— é…ç½®å¯¹è±¡                                |
| **é€‚ç”¨åœºæ™¯** | ç®€å•çš„çŠ¶æ€åˆ‡æ¢é€»è¾‘                                           |

---

### 1.6 æœåŠ¡ç«¯çŠ¶æ€ç®¡ç†æ´¾ç³» (Server State)

#### TanStack Query (React Query)

| ç»´åº¦         | å†…å®¹                                                                        |
| :----------- | :-------------------------------------------------------------------------- |
| **GitHub**   | [TanStack/query](https://github.com/TanStack/query) â­ 40k+                 |
| **æ ¸å¿ƒæ€æƒ³** | æœåŠ¡ç«¯çŠ¶æ€æ˜¯"ç¼“å­˜"è€Œé"åº”ç”¨çŠ¶æ€"                                            |
| **å®ç°åŸç†** | Query Cache å­˜å‚¨è¯·æ±‚ç»“æœï¼Œç”¨ staleTime/cacheTime æ§åˆ¶ç¼“å­˜ç­–ç•¥ï¼Œè‡ªåŠ¨åå°åˆ·æ–° |
| **ä¼˜ç‚¹**     | å½»åº•è§£å†³ loading/error/data ä¸‰æ€ã€ä¹è§‚æ›´æ–°ã€è‡ªåŠ¨é‡è¯•                        |
| **ç¼ºç‚¹**     | åªç®¡æœåŠ¡ç«¯çŠ¶æ€ï¼Œå®¢æˆ·ç«¯çŠ¶æ€ä»éœ€å…¶ä»–åº“                                        |

```javascript
// React Query æ ¸å¿ƒæ¦‚å¿µ
const { data, isLoading, error } = useQuery({
  queryKey: ['users', userId],
  queryFn: () => fetchUser(userId),
  staleTime: 5 * 60 * 1000, // 5 åˆ†é’Ÿå†…ä¸é‡æ–°è·å–
});

// ä¹è§‚æ›´æ–°
useMutation({
  mutationFn: updateUser,
  onMutate: async (newData) => {
    await queryClient.cancelQueries(['users', userId]);
    const previous = queryClient.getQueryData(['users', userId]);
    queryClient.setQueryData(['users', userId], newData); // ä¹è§‚æ›´æ–°
    return { previous };
  },
  onError: (err, newData, context) => {
    queryClient.setQueryData(['users', userId], context.previous); // å›æ»š
  },
});
```

---

#### SWR (Vercel)

| ç»´åº¦                 | å†…å®¹                                                |
| :------------------- | :-------------------------------------------------- |
| **GitHub**           | [vercel/swr](https://github.com/vercel/swr) â­ 30k+ |
| **æ ¸å¿ƒæ€æƒ³**         | Stale-While-Revalidate ç¼“å­˜ç­–ç•¥                     |
| **å®ç°åŸç†**         | å…ˆè¿”å›ç¼“å­˜æ•°æ®ï¼ŒåŒæ—¶åå°é‡æ–°éªŒè¯                    |
| **å¯¹æ¯” React Query** | API æ›´ç®€æ´ï¼Œä½†åŠŸèƒ½è¾ƒå°‘ï¼ˆæ—  Mutationã€æ—  DevToolsï¼‰  |

---

#### RTK Query (Redux Toolkit)

| ç»´åº¦         | å†…å®¹                           |
| :----------- | :----------------------------- |
| **æ ¸å¿ƒæ€æƒ³** | Redux ç”Ÿæ€çš„æœåŠ¡ç«¯çŠ¶æ€æ–¹æ¡ˆ     |
| **å®ç°åŸç†** | åœ¨ Redux Store å†…ç®¡ç† API ç¼“å­˜ |
| **ä¼˜ç‚¹**     | ä¸ Redux æ— ç¼é›†æˆ              |
| **ç¼ºç‚¹**     | ç»‘å®š Redux ç”Ÿæ€                |

---

### 1.7 RxJS / Observable æ´¾ç³»

#### RxJS

| ç»´åº¦         | å†…å®¹                                                        |
| :----------- | :---------------------------------------------------------- |
| **GitHub**   | [ReactiveX/rxjs](https://github.com/ReactiveX/rxjs) â­ 30k+ |
| **æ ¸å¿ƒæ€æƒ³** | ä¸€åˆ‡çš†æµ (Everything is a Stream)                           |
| **å®ç°åŸç†** | Observable è¡¨ç¤ºéšæ—¶é—´æ¨é€çš„å€¼åºåˆ—ï¼ŒOperators å¯¹æµè¿›è¡Œå˜æ¢   |
| **ä¼˜ç‚¹**     | å¤„ç†å¤æ‚å¼‚æ­¥é€»è¾‘çš„ç»ˆæå·¥å…·                                  |
| **ç¼ºç‚¹**     | å­¦ä¹ æ›²çº¿æé™¡ã€React é›†æˆéœ€è¦èƒ¶æ°´å±‚                          |

```javascript
// RxJS æ ¸å¿ƒæ¦‚å¿µ
const clicks$ = fromEvent(button, 'click');
const positions$ = clicks$.pipe(
  throttleTime(1000),
  map((e) => ({ x: e.clientX, y: e.clientY })),
  distinctUntilChanged(),
);
positions$.subscribe((pos) => console.log(pos));
```

---

#### Elf (RxJS çŠ¶æ€ç®¡ç†)

| ç»´åº¦         | å†…å®¹                                                 |
| :----------- | :--------------------------------------------------- |
| **GitHub**   | [ngneat/elf](https://github.com/ngneat/elf) â­ 1.5k+ |
| **æ ¸å¿ƒæ€æƒ³** | åŸºäº RxJS çš„æ¨¡å—åŒ–çŠ¶æ€ç®¡ç†                           |
| **ä¼˜ç‚¹**     | ä¸º RxJS ç”¨æˆ·æä¾›å¼€ç®±å³ç”¨çš„ Store æ¨¡å¼                |

---

#### Akita

| ç»´åº¦         | å†…å®¹                                                         |
| :----------- | :----------------------------------------------------------- |
| **GitHub**   | [datorama/akita](https://github.com/datorama/akita) â­ 3.7k+ |
| **æ ¸å¿ƒæ€æƒ³** | åŸºäº RxJS çš„å®ä½“ç®¡ç†                                         |
| **é€‚ç”¨åœºæ™¯** | Angular é¡¹ç›®æˆ– RxJS é‡åº¦ç”¨æˆ·                                 |

---

### 1.8 CRDT / åä½œçŠ¶æ€æ´¾ç³»

#### Yjs

| ç»´åº¦         | å†…å®¹                                               |
| :----------- | :------------------------------------------------- |
| **GitHub**   | [yjs/yjs](https://github.com/yjs/yjs) â­ 15k+      |
| **æ ¸å¿ƒæ€æƒ³** | CRDT (æ— å†²çªå¤åˆ¶æ•°æ®ç±»å‹) å®ç°å¤šäººå®æ—¶åä½œ         |
| **å®ç°åŸç†** | æ¯ä¸ªæ“ä½œæºå¸¦å”¯ä¸€ ID å’Œå› æœä¾èµ–ï¼Œåˆå¹¶æ—¶è‡ªåŠ¨è§£å†³å†²çª |
| **ä¼˜ç‚¹**     | ç¦»çº¿ä¼˜å…ˆã€P2P æ”¯æŒã€ä¸ä¸»æµç¼–è¾‘å™¨é›†æˆ               |
| **ç¼ºç‚¹**     | åªè§£å†³åä½œé—®é¢˜ï¼Œä¸æ˜¯é€šç”¨çŠ¶æ€ç®¡ç†                   |

```javascript
import * as Y from 'yjs';
import { WebsocketProvider } from 'y-websocket';

const doc = new Y.Doc();
const ymap = doc.getMap('shared-state');

// æœ¬åœ°ä¿®æ”¹è‡ªåŠ¨åŒæ­¥åˆ°æ‰€æœ‰å®¢æˆ·ç«¯
ymap.set('count', 42);

// ç›‘å¬è¿œç¨‹å˜æ›´
ymap.observe((event) => {
  console.log('Changed:', event.changes);
});
```

---

#### Automerge

| ç»´åº¦         | å†…å®¹                                                                 |
| :----------- | :------------------------------------------------------------------- |
| **GitHub**   | [automerge/automerge](https://github.com/automerge/automerge) â­ 3k+ |
| **æ ¸å¿ƒæ€æƒ³** | JSON å‹å¥½çš„ CRDT                                                     |
| **å¯¹æ¯” Yjs** | API æ›´ç®€æ´ï¼Œä½†æ€§èƒ½ç•¥é€Šäº Yjs                                         |

---

#### Liveblocks

| ç»´åº¦         | å†…å®¹                                    |
| :----------- | :-------------------------------------- |
| **å®˜ç½‘**     | [liveblocks.io](https://liveblocks.io/) |
| **æ ¸å¿ƒæ€æƒ³** | CRDT + åç«¯å³æœåŠ¡ (BaaS)                |
| **ä¼˜ç‚¹**     | å¼€ç®±å³ç”¨çš„åä½œåŸºç¡€è®¾æ–½                  |

---

### 1.9 GraphQL å®¢æˆ·ç«¯æ´¾ç³»

#### Apollo Client

| ç»´åº¦         | å†…å®¹                                                                                  |
| :----------- | :------------------------------------------------------------------------------------ |
| **GitHub**   | [apollographql/apollo-client](https://github.com/apollographql/apollo-client) â­ 19k+ |
| **æ ¸å¿ƒæ€æƒ³** | GraphQL + å½’ä¸€åŒ–ç¼“å­˜                                                                  |
| **å®ç°åŸç†** | å°† GraphQL å“åº”æ‹å¹³åˆ° ID ç´¢å¼•çš„ç¼“å­˜ä¸­ï¼Œè‡ªåŠ¨æ›´æ–°å¼•ç”¨                                   |
| **ä¼˜ç‚¹**     | è‡ªåŠ¨ç¼“å­˜ã€ä¹è§‚ UIã€Fragment Colocation                                                |
| **ç¼ºç‚¹**     | æ‰“åŒ…ä½“ç§¯å¤§ã€é…ç½®å¤æ‚                                                                  |

---

#### Relay (Facebook)

| ç»´åº¦         | å†…å®¹                                                        |
| :----------- | :---------------------------------------------------------- |
| **GitHub**   | [facebook/relay](https://github.com/facebook/relay) â­ 18k+ |
| **æ ¸å¿ƒæ€æƒ³** | ç¼–è¯‘æœŸä¼˜åŒ–çš„ GraphQL å®¢æˆ·ç«¯                                 |
| **ä¼˜ç‚¹**     | æè‡´æ€§èƒ½ã€ä¸ React æ·±åº¦é›†æˆ                                 |
| **ç¼ºç‚¹**     | å­¦ä¹ æ›²çº¿æé«˜ã€éœ€è¦å®Œæ•´çš„ç¼–è¯‘å·¥å…·é“¾                          |

---

#### URQL

| ç»´åº¦            | å†…å®¹                                                               |
| :-------------- | :----------------------------------------------------------------- |
| **GitHub**      | [urql-graphql/urql](https://github.com/urql-graphql/urql) â­ 8.5k+ |
| **æ ¸å¿ƒæ€æƒ³**    | è½»é‡çº§ GraphQL å®¢æˆ·ç«¯                                              |
| **å¯¹æ¯” Apollo** | æ›´å°ã€æ›´æ¨¡å—åŒ–ã€å¯æ’æ‹”çš„ç¼“å­˜                                       |

---

### 1.10 å…¶ä»–ç‰¹è‰²æ–¹æ¡ˆ

#### Effector (ä¿„ç½—æ–¯)

| ç»´åº¦         | å†…å®¹                                                               |
| :----------- | :----------------------------------------------------------------- |
| **GitHub**   | [effector/effector](https://github.com/effector/effector) â­ 4.5k+ |
| **æ ¸å¿ƒæ€æƒ³** | å¤šå‘æ•°æ®æµ + å¼ºç±»å‹æ¨æ–­                                            |
| **å®ç°åŸç†** | Store/Event/Effect ä¸‰ä½ä¸€ä½“ï¼Œæ•°æ®æµæ˜¾å¼å£°æ˜                        |
| **ä¼˜ç‚¹**     | ç±»å‹å®Œç¾ã€æ€§èƒ½æé«˜                                                 |
| **ç¼ºç‚¹**     | å›½å†…å°‘è§ã€API ç¹ç                                                 |

```javascript
import { createStore, createEvent, createEffect } from 'effector';

const increment = createEvent();
const $counter = createStore(0).on(increment, (n) => n + 1);

const fetchUser = createEffect(async (id) => {
  const res = await fetch(`/api/users/${id}`);
  return res.json();
});
```

---

#### Hookstate

| ç»´åº¦         | å†…å®¹                                                               |
| :----------- | :----------------------------------------------------------------- |
| **GitHub**   | [avkonst/hookstate](https://github.com/avkonst/hookstate) â­ 1.6k+ |
| **æ ¸å¿ƒæ€æƒ³** | åŸºäº Proxy çš„æç®€ React Hook                                       |
| **ä¼˜ç‚¹**     | é›¶æ ·æ¿ä»£ç ã€æ·±åº¦åµŒå¥—å¯¹è±¡æ€§èƒ½ä¼˜å¼‚                                   |

---

#### Overmind

| ç»´åº¦         | å†…å®¹                                                               |
| :----------- | :----------------------------------------------------------------- |
| **GitHub**   | [cerebral/overmind](https://github.com/cerebral/overmind) â­ 1.3k+ |
| **æ ¸å¿ƒæ€æƒ³** | èåˆ Flux + Statechart + Proxy çš„é‡å¿ƒä¹‹ä½œ                          |
| **ç‰¹è‰²**     | å†…ç½® DevToolsã€å¯è§†åŒ–çŠ¶æ€æµ                                        |

---

### 1.11 é¢†åŸŸä¸“ç”¨çŠ¶æ€ç®¡ç†

| é¢†åŸŸ           | ä»£è¡¨åº“                        | è¯´æ˜                         |
| :------------- | :---------------------------- | :--------------------------- |
| **è¡¨å•çŠ¶æ€**   | React Hook Form, Formik       | è¡¨å•éªŒè¯ã€å­—æ®µçŠ¶æ€ã€æäº¤å¤„ç† |
| **è·¯ç”±çŠ¶æ€**   | TanStack Router, React Router | URL å³çŠ¶æ€ï¼Œæµè§ˆå™¨å†å²ç®¡ç†   |
| **è¡¨æ ¼çŠ¶æ€**   | TanStack Table                | åˆ†é¡µã€æ’åºã€ç­›é€‰ã€è¡Œé€‰æ‹©     |
| **æœ¬åœ°æ•°æ®åº“** | RxDB, PouchDB, Dexie          | ç¦»çº¿ä¼˜å…ˆã€IndexedDB å°è£…     |
| **åŠ¨ç”»çŠ¶æ€**   | Framer Motion, React Spring   | åŸºäºç‰©ç†çš„åŠ¨ç”»çŠ¶æ€æœº         |

---

### 1.12 å†å²é—ç•™æ–¹æ¡ˆ (ä¸æ¨èæ–°é¡¹ç›®ä½¿ç”¨)

| åº“                 | çŠ¶æ€               | æ›¿ä»£æ–¹æ¡ˆ      |
| :----------------- | :----------------- | :------------ |
| **Recoil**         | âš ï¸ åœæ­¢ç»´æŠ¤ (2024) | Jotai         |
| **Redux (Legacy)** | âš ï¸ è¿‡æ—¶            | Redux Toolkit |
| **Flux (Library)** | ğŸª¦ å·²åºŸå¼ƒ          | ä»»æ„ç°ä»£æ–¹æ¡ˆ  |
| **Alt.js**         | ğŸª¦ å·²åºŸå¼ƒ          | Zustand       |
| **Reflux**         | ğŸª¦ å·²åºŸå¼ƒ          | Zustand       |

---

## äºŒã€ç°æœ‰å‰ç«¯çŠ¶æ€ç®¡ç†åº“çš„æ ¸å¿ƒé—®é¢˜

### 1. èŒƒå¼å‰²è£‚ (Paradigm Fragmentation)

| é—®é¢˜                   | å…·ä½“è¡¨ç°                                                                            |
| :--------------------- | :---------------------------------------------------------------------------------- |
| **æµæ´¾å¤ªå¤šï¼Œé€‰æ‹©ç–²åŠ³** | Fluxã€Atomicã€Proxyã€FSMã€Signalã€CRDT... å¼€å‘è€…éœ€è¦å­¦ä¹ å¤šç§å¿ƒæ™ºæ¨¡å‹                |
| **ä¸åŒåº“è§£å†³ä¸åŒé—®é¢˜** | Zustand ç®¡æœ¬åœ°çŠ¶æ€ã€React Query ç®¡æœåŠ¡ç«¯ã€XState ç®¡é€»è¾‘æµã€Yjs ç®¡åä½œâ€”â€”éœ€è¦"ç»„åˆæ‹³" |
| **èƒ¶æ°´ä»£ç æ— ç©·å°½**     | åº“ä¸åº“ä¹‹é—´çš„é›†æˆéœ€è¦å¤§é‡æ ·æ¿ä»£ç                                                     |

### 2. æŠ½è±¡å±‚çº§æ··ä¹± (Abstraction Confusion)

- **Redux**ï¼šæŠ½è±¡å¤ªé‡ï¼Œæ¦‚å¿µç¹å¤š (Actionã€Reducerã€Middlewareã€Selector...)
- **Context API**ï¼šæŠ½è±¡å¤ªè½»ï¼Œæ€§èƒ½ç¾éš¾ï¼Œæ— æ³• scale
- **Signal**ï¼šæŠ½è±¡å¤ªåº•å±‚ï¼Œæ”¾å¼ƒäº† React è°ƒå’Œæœºåˆ¶ï¼Œé»‘é­”æ³•
- **MobX**ï¼šæŠ½è±¡å¤ªéšå¼ï¼Œè£…é¥°å™¨é­”æ³•è®©è°ƒè¯•å›°éš¾

### 3. æœåŠ¡ç«¯/å®¢æˆ·ç«¯çŠ¶æ€äºŒå…ƒå¯¹ç«‹

React Query è™½ç„¶ä¼Ÿå¤§ï¼Œä½†å®ƒåˆ›é€ äº†ä¸€ä¸ªæ–°é—®é¢˜ï¼š**ä½ éœ€è¦ä¸¤å¥—å¿ƒæ™ºæ¨¡å‹**ã€‚

- ã€Œè¿™ä¸ªæ•°æ®æ˜¯æœåŠ¡ç«¯çš„è¿˜æ˜¯å®¢æˆ·ç«¯çš„ï¼Ÿã€
- ã€Œæˆ‘è¯¥ `useQuery` è¿˜æ˜¯ `useState`ï¼Ÿã€
- ã€Œä¹è§‚æ›´æ–°æ€ä¹ˆåšï¼ŸæœåŠ¡ç«¯çŠ¶æ€å’Œæœ¬åœ° UI çŠ¶æ€æ€ä¹ˆåŒæ­¥ï¼Ÿã€

### 4. é€»è¾‘ä¸æ•°æ®çš„å¼ºè€¦åˆ

XState æ˜¯ä¸ªä¾‹å¤–ï¼Œä½†å¤§å¤šæ•°åº“æŠŠ"æ•°æ®å­˜å‚¨"å’Œ"ä¸šåŠ¡é€»è¾‘æµç¨‹"æ··åœ¨ä¸€èµ·ï¼š

- çŠ¶æ€å˜æ›´é€»è¾‘åˆ†æ•£åœ¨ reducerã€actionã€ç»„ä»¶å„å¤„
- éš¾ä»¥å›ç­”ã€Œç³»ç»Ÿç°åœ¨å¤„äºä»€ä¹ˆçŠ¶æ€ï¼Ÿä¸‹ä¸€æ­¥å¯ä»¥åšä»€ä¹ˆï¼Ÿã€

### 5. æ—¶é—´æ—…è¡Œä¸å¯é¢„æµ‹æ€§çš„ä»£ä»·

- Redux DevTools çš„"æ—¶é—´æ—…è¡Œ"å¾ˆé…·ï¼Œä½†ä»£ä»·æ˜¯**ä¸å¯å˜æ•°æ® + çº¯å‡½æ•°**çš„å¼ºçº¦æŸ
- Immer åªæ˜¯è¯­æ³•ç³–ï¼Œåº•å±‚ä»ç„¶æ˜¯æ·±æ‹·è´ï¼Œæ€§èƒ½å¼€é”€å·¨å¤§

### 6. å¤šäººåä½œæ˜¯ afterthought

- Yjs/CRDT è™½ç„¶å¼ºå¤§ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„"å¹¶è¡Œä¸–ç•Œ"
- æ²¡æœ‰ä¸€ä¸ªåº“èƒ½åŸç”Ÿæ”¯æŒï¼š"æˆ‘æƒ³è®©è¿™ä¸ªçŠ¶æ€æ—¢èƒ½æœ¬åœ°ä¿®æ”¹ï¼Œåˆèƒ½å¤šäººåä½œ"

---

## äºŒã€ã€Œå®Œç¾ã€çš„çŠ¶æ€ç®¡ç†åº“åº”è¯¥é•¿ä»€ä¹ˆæ ·ï¼Ÿ

ç†æƒ³çš„ä¸‹ä¸€ä»£çŠ¶æ€ç®¡ç†åº“åº”è¯¥å…·å¤‡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç†æƒ³çŠ¶æ€ç®¡ç†åº“çš„ç‰¹å¾                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. å•ä¸€å¿ƒæ™ºæ¨¡å‹      â”‚ æ— è®ºæœ¬åœ°/æœåŠ¡ç«¯/åä½œçŠ¶æ€ï¼ŒAPI ä¸€è‡´         â”‚
â”‚  2. å£°æ˜å¼é€»è¾‘æµ      â”‚ å†…ç½® FSM/Statechartï¼ŒçŠ¶æ€è½¬æ¢å¯è§†åŒ–        â”‚
â”‚  3. ç»†ç²’åº¦å“åº”å¼      â”‚ Signal-like æ€§èƒ½ï¼Œæ— éœ€æ‰‹åŠ¨ä¼˜åŒ–             â”‚
â”‚  4. åä½œåŸç”Ÿæ”¯æŒ      â”‚ å¯é€‰å¼€å¯ CRDTï¼Œæ— éœ€åˆ‡æ¢åº“                  â”‚
â”‚  5. ç±»å‹å®‰å…¨          â”‚ 100% TypeScriptï¼Œç¼–è¯‘æœŸæ•è·é”™è¯¯            â”‚
â”‚  6. å¼€å‘è€…ä½“éªŒ        â”‚ å°äº 3KBï¼Œé›¶é…ç½®ï¼Œ5 åˆ†é’Ÿä¸Šæ‰‹               â”‚
â”‚  7. æ¡†æ¶æ— å…³          â”‚ React/Vue/Svelte/Solid é€šç”¨                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€ä¸‹ä¸€ä»£çŠ¶æ€ç®¡ç†åº“è®¾è®¡æ„æƒ³

### 3.1 è®¾è®¡åŸåˆ™

1. **ç»Ÿä¸€æŠ½è±¡**ï¼šè®¾è®¡ä¸€ä¸ªè¶³å¤Ÿé€šç”¨çš„ã€ŒState
   Nodeã€åŸè¯­ï¼Œèƒ½è¡¨è¾¾åŸå­çŠ¶æ€ã€æ´¾ç”ŸçŠ¶æ€ã€å¼‚æ­¥çŠ¶æ€ã€åä½œçŠ¶æ€
2. **é€»è¾‘åˆ†ç¦»**ï¼šæŠŠ"æ•°æ®"å’Œ"çŠ¶æ€æœº"ä½œä¸ºä¸¤ä¸ªæ­£äº¤çš„ç»´åº¦
3. **æ¸è¿›å¢å¼º**ï¼šç®€å•åœºæ™¯æç®€ APIï¼Œå¤æ‚åœºæ™¯å¯æ’æ‹”æ‰©å±•

### 3.2 æŠ€æœ¯é€‰å‹

- **å“åº”å¼æ ¸å¿ƒ**ï¼šåŸºäº Signal çš„ç»†ç²’åº¦è®¢é˜…
- **é€»è¾‘å±‚**ï¼šå€Ÿé‰´ XState çš„ Statechartï¼Œä½†æ›´è½»é‡
- **åä½œå±‚**ï¼šå¯é€‰é›†æˆ Yjs
- **TypeScript**ï¼šç±»å‹æ¨æ–­é©±åŠ¨çš„ API è®¾è®¡

### 3.3 API è®¾è®¡è‰æ¡ˆ (MVP)

```typescript
// æ¢¦æƒ³ä¸­çš„ API
import { atom, machine, sync } from 'next-state';

// 1. åŸå­çŠ¶æ€ (like Jotai)
const countAtom = atom(0);

// 2. å£°æ˜å¼çŠ¶æ€æœº (like XState, ä½†æ›´ç®€æ´)
const authMachine = machine({
  initial: 'idle',
  states: {
    idle: { on: { LOGIN: 'loading' } },
    loading: { on: { SUCCESS: 'authenticated', FAILURE: 'error' } },
    authenticated: { on: { LOGOUT: 'idle' } },
    error: { on: { RETRY: 'loading' } },
  },
});

// 3. æœåŠ¡ç«¯çŠ¶æ€ (like React Query, ä½†ç»Ÿä¸€ API)
const userAtom = atom.async(fetchUser);

// 4. åä½œçŠ¶æ€ (CRDT built-in)
const docAtom = atom.sync({ title: '', content: '' });
```

### 3.4 æ¶æ„åˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Framework Adapters                    â”‚
â”‚              (React / Vue / Svelte / Solid)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     State Layer                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Atom Core  â”‚  Machine    â”‚  Sync (CRDT)        â”‚  â”‚
â”‚   â”‚  (Signal)   â”‚  (FSM)      â”‚  (Yjs Integration)  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Scheduler & Effects                    â”‚
â”‚            (Batching, Async, Subscriptions)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    DevTools Protocol                     â”‚
â”‚         (Time Travel, State Inspector, Logging)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€å®æ–½è·¯çº¿å›¾

### Phase 1: æ ¸å¿ƒåŸè¯­ (Week 1-2)

- [ ] å®ç° `atom()` - åŸºäº Signal çš„å“åº”å¼åŸå­
- [ ] å®ç° `computed()` - æ´¾ç”ŸçŠ¶æ€
- [ ] å®ç°åŸºç¡€è®¢é˜…æœºåˆ¶

### Phase 2: çŠ¶æ€æœºé›†æˆ (Week 3-4)

- [ ] å®ç° `machine()` - è½»é‡çº§ FSM
- [ ] çŠ¶æ€æœºä¸ atom çš„ç»‘å®š
- [ ] å¯è§†åŒ–å·¥å…·æ¥å£

### Phase 3: å¼‚æ­¥ä¸æœåŠ¡ç«¯çŠ¶æ€ (Week 5-6)

- [ ] å®ç° `atom.async()` - å¼‚æ­¥æ•°æ®è·å–
- [ ] ç¼“å­˜ç­–ç•¥ä¸ä¹è§‚æ›´æ–°
- [ ] é”™è¯¯è¾¹ç•Œå¤„ç†

### Phase 4: åä½œæ”¯æŒ (Week 7-8)

- [ ] å®ç° `atom.sync()` - CRDT é›†æˆ
- [ ] Yjs é€‚é…å™¨
- [ ] å†²çªè§£å†³ç­–ç•¥

### Phase 5: æ¡†æ¶é€‚é… (Week 9-10)

- [ ] React é€‚é…å™¨ (`@next-state/react`)
- [ ] Vue é€‚é…å™¨ (`@next-state/vue`)
- [ ] DevTools æ‰©å±•

---

## äº”ã€å‚è€ƒèµ„æº

### ç°æœ‰åº“æ·±åº¦ç ”ç©¶

- [Zustand](https://github.com/pmndrs/zustand) - æç®€ Flux
- [Jotai](https://github.com/pmndrs/jotai) - åŸå­åŒ–çŠ¶æ€
- [XState](https://github.com/statelyai/xstate) - çŠ¶æ€æœº
- [Yjs](https://github.com/yjs/yjs) - CRDT åä½œ
- [Legend-State](https://github.com/LegendApp/legend-state) - Signal æ€§èƒ½

### å­¦æœ¯è®ºæ–‡

- [Statecharts: A Visual Formalism for Complex Systems (1987)](https://www.wisdom.weizmann.ac.il/~harel/papers/Statecharts.History.pdf)
- [CRDTs: Consistency without Consensus](https://crdt.tech/)

### ç›¸å…³è®¨è®º

- [The Evolution of State Management](https://leerob.io/blog/react-state-management)
- [Signals: Fine-grained Reactivity](https://dev.to/ryansolid/a-hands-on-introduction-to-fine-grained-reactivity-3ndf)

---

_æ–‡æ¡£åˆ›å»ºäº 2026-01-06ï¼ŒæŒç»­æ›´æ–°ä¸­..._
